<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>게임 굿즈 쇼핑몰</title>
     <!-- 부트스트랩 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <!-- jquery 다운 -->
    <script src="https://code.jquery.com/jquery-3.7.0.min.js" integrity="sha256-2Pmvv0kuTBOenSvLm6bvfBSSHrUJ+3A7x6P5Ebd07/g="
    crossorigin="anonymous"></script>
      
    <!-- 아이콘 -->
    <script src="https://kit.fontawesome.com/8786e78429.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <!-- css 링크-->
    <link rel="stylesheet" href="./css/productListCss.css">
    <!-- backend가 없는 상태로, 클릭이 되면 하트가 눌려있는게 저장이 되야한다. -->

    
    <style>
       
    </style>
</head>
<body>
    <header class="container">
        <!-- Navbar -->
        <nav class="navbar navbar-expand-lg navbar-light">
            <div class="container-fluid">
                <a class="navbar-brand" href="index.html">
                    <img class="logo-img" src="./img/btn/logo_removebg.png" alt="">
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                    data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                    aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <!-- 메뉴 -->
                    <!-- <ul class="navbar-nav"></ul> -->
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item">
                            <a class="nav-link" href="productsByGame.html">게임</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="productsByType.html">상품</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="save.html">장바구니</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="save.html">마이페이지</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="loginPage.html">로그인</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>


    <main>
        <div class="container">

            <div>
                <div id="carouselExample" class="carousel slide" >
                    <div class="carousel-inner">
                        <div class="carousel-item active">
                            <img src="./typeBanner/shop1.jpg" class="d-block w-100" alt="...">
                        </div>
                        <div class="carousel-item">
                            <img src="./typeBanner/shop2.jpg" class="d-block w-100" alt="...">
                            <!-- <button type="button">버튼 체크</button> -->
                        </div>
                    </div>
                    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExample" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Previous</span>
                    </button>
                    <button class="carousel-control-next" type="button" data-bs-target="#carouselExample" data-bs-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Next</span>
                    </button>
                </div> 
            </div>
            
            <br>
            <div>
                <ul class="typeButtonGroup">
                    <!-- borderBtn이 눌리면, page가 이동한다. -->
                    <li  onclick="borderBtnClicked('Doll')">
                        <div class="buttonClass">
                            <img id="doll_main" src="./img/doll/doll_main.png">
                        </div>
                        <p class="littleBorderButton">인형</p>
                    </li>
                    <li  onclick="borderBtnClicked('Airpot')">
                        <div class="buttonClass">
                            <img id="airpot_main" src="./img/pot/airpot_main.png">
                        </div>
                        <p class="littleBorderButton">에어팟</p>
                    </li>
                    <li  onclick="borderBtnClicked('Clothes')">
                        <div class="buttonClass">
                            <img id="cloth_main" src="./img/cloth/cloth_main.png">
                        </div>
                        <p class="littleBorderButton">의류</p>
                    </li>
                    <li  onclick="borderBtnClicked('Statue')">
                        <div class="buttonClass">
                            <img id="statue_main" src="./img/statue/statue_main.jpg">
                        </div>
                        <p class="littleBorderButton">스태츄</p>
                    </li>
                    <li  onclick="borderBtnClicked('Phonecase')">
                        <div class="buttonClass">
                            <img id="phonecase_main" src="./img/phonecase/case_main.jpg">
                         </div>
                        <p class="littleBorderButton">모바일 ACC</p>
                    </li>
                    <li  onclick="borderBtnClicked('Accessory')">
                        <div class="buttonClass">
                            <img id="acc_main" src="./img/accessory/acc_main.jpg">
                        </div>
                        <p class="littleBorderButton">악세서리</p>
                    </li>
                    <li  onclick="borderBtnClicked('Pad')">
                        <div class="buttonClass">
                            <img id="pad_main" src="./img/pad/pad_main.jpg">
                        </div>
                        <p class="littleBorderButton">마우스 패드</p>
                    </li>
                    <li  onclick="borderBtnClicked('Goods')">
                        <div class="buttonClass">
                            <img id="other_main" src="./img/other/other_main.jpg">
                        </div>
                        <p class="littleBorderButton">기타 굿즈</p>
                    </li>
                </ul>
            </div>

            <hr>
         

            <div class="typeGoodsGroup">
                <h2>추천 상품</h2>
                <div class="typeGoodsList popular">
                    <div class="Goods">
                        <a href="">
                            <img src="../../../img/doll/포로.png">
                            <div>포로</div>
                            <div>리그 오브 레전드</div>
                            <div>30,000원</div>
                        </a>
                        <!-- 아이콘 -->
                        <i class="fa-regular fa-heart" onclick="favoriteBtn('poro',this,0);" ></i>
                    </div>
                    <div class="Goods">
                        <a href="">
                            <img src="../../../img/doll/포로.png">
                            <div>포로</div>
                            <div>리그 오브 레전드</div>
                            <div>30,000원</div>
                        </a>
                        <!-- 아이콘 -->
                        <i class="fa-regular fa-heart" onclick="favoriteBtn('poro',this,1);" ></i>
                    </div>
                    <div class="Goods">
                        <a href="">
                            <img src="../../../img/doll/포로.png">
                            <div>포로</div>
                            <div>리그 오브 레전드</div>
                            <div>30,000원</div>
                        </a>
                        <!-- 아이콘 -->
                        <i class="fa-regular fa-heart" onclick="favoriteBtn('poro',this,2);"  ></i>
                    </div>
                    <div class="Goods">
                        <a href="">
                            <img src="../../../img/doll/포로.png">
                            <div>포로</div>
                            <div>리그 오브 레전드</div>
                            <div>30,000원</div>
                        </a>
                        <!-- 아이콘 -->
                        <i class="fa-regular fa-heart" onclick="favoriteBtn('poro',this,3);"  ></i>
                    </div>
                    <div class="Goods">
                        <a href="">
                            <img src="../../../img/doll/포로.png">
                            <div>포로</div>
                            <div>리그 오브 레전드</div>
                            <div>30,000원</div>
                        </a>
                        <!-- 아이콘 -->
                        <i class="fa-regular fa-heart" onclick="favoriteBtn('poro',this,4);"  ></i>
                    </div>
                    <div class="Goods">
                        <a href="">
                            <img src="../../../img/doll/포로.png">
                            <div>포로</div>
                            <div>리그 오브 레전드</div>
                            <div>30,000원</div>
                        </a>
                        <!-- 아이콘 -->
                        <i class="fa-regular fa-heart" onclick="favoriteBtn('poro',this,5);"  ></i>
                    </div>
                    <div class="Goods">
                        <a href="">
                            <img src="../../../img/doll/포로.png">
                            <div>포로</div>
                            <div>리그 오브 레전드</div>
                            <div>30,000원</div>
                        </a>
                        <!-- 아이콘 -->
                        <i class="fa-regular fa-heart" onclick="favoriteBtn('poro',this,6);"  ></i>
                    </div>

                </div>
                <br>
                <br>
                <div class="moreBtnContainer">
                    <button type="button" class="moreBtn popular buttonClass" onclick="moreBtnClicked('popular')">더보기</button>
                </div>
                <br>
                <hr>
            </div>

        </div>
     
 <!-- <i class="fa-regular fa-heart"></i> -->
    </main>
    <!-- Modal -->
    <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="staticBackdropLabel">관심 상품 추가</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <!-- <div class="dropdown">
                    <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                      Dropdown button
                    </button>
                    <ul class="dropdown-menu">
                    <li><a class="dropdown-item" href="#">Action</a></li>
                    <li><a class="dropdown-item" href="#">Another action</a></li>
                    <li><a class="dropdown-item" href="#">Something else here</a></li>
                    </ul>
                </div> -->
                상품이 좋아요 목록에 추가되었습니다.</br>
                페이지를 이동하여 확인해보시겠습니까?
            </div>
            <div class="modal-footer">
            <!--취소하면, 좋아요 목록에 추가된 상태로 원래 페이지로 나가야하고, -->
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">나가기</button>
            <!-- 확인이라면, 쿠키에 추가하고 다른 페이지로 나가야한다. -->
            <button id="favoriteModalOK" type="button" class="btn btn-primary">확인</button>
            </div>
        </div>
        </div>
    </div>
    <!-- Footer mt-5   text-center -->
    <footer class="footer container" >
        <div class="footerDiv">
            <div>
            <ul class="footer_ul" style="display: flex;" >
                <li>
                    <a>회사소개</a>
                </li>
                <li>
                    <a>인재채용</a>
                </li>
                <li><a>회사약관</a></li>
                <li><a>개인정보처리약관</a></li>
            </ul>
            </div>
            <div  class="div_sns">
                <a href="https://www.instagram.com/" >
                    <i class="bi bi-instagram fs-1" , style="color: black;"></i>
                </a>
                <a href="https://www.twitter.com/" >
                    <i class="bi bi-twitter fs-1" , style="color: black;"></i>
                </a>
                <a href="https://www.youtube.com/">
                    <i class="bi bi-youtube fs-1"  , style="color: black;"></i>
                </a>

            </div>
        </div>
            <div class="footer_div_dt">
            <dl>
                <dt class="dt_title">
                    크림 주식회사 · 대표 김창욱
                    <span class="blank"></span>
                        사업자등록번호 : 570-88-01618
                    <a></a>
                        사업자정보확인
                    <span class="blank"></span>
                        사업장소재지 : 경기도 성남시 분당구 분당내곡로 131 판교테크원 타워1, 8층
                    <span class="blank"></span>
                        호스팅 서비스 : 네이버 클라우드 (주)
                    <span class="blank"></span>
                    <br><br>
                    셀러 상품의 경우 (주)마플코퍼레이션은 통신판매중개자로서 통신판매의 당사자가 아니며 상품, 거래정보, 거래에 대하여 책임을 지지 않습니다.
                    각 상품 페이지에서 구체적인 내용을 확인하시기 바랍니다.
                    <br><br>
                    고객센터 
                    <span class="blank"></span>
                    신고센터 
                    <span class="blank"></span>
                    셀러신청  
                    <span class="blank"></span>
                    기업셀러신청 
                    <span class="blank"></span>
                    개인정보처리방침이용약관 
                    <span class="blank"></span>
                    마플코퍼레이션 
                </dt>
            </dl>
            </div>
        </div>
    </footer>

    <script>

    let b;
    let a;
     // localStorage.clear()
     $(".Goods > i:last-child").attr("data-bs-target","#staticBackdrop")
    $(".Goods > i:last-child").attr("data-bs-toggle","modal")
    // /* 좋아요 버튼(하트)에 모달 링크 달기 */
    // 배열에 없으면 modal 뺴야함
    //
    let objJson;
    async function load() {
    // 파일 읽어 오기
    const data = await fetch('./images.json');
    // JSON으로 해석
    objJson = await data.json();
    // 텍스트 출력
    let products=$(".typeGoodsList > .Goods")
    let arrayAhref = $(".Goods > a")
    for(let i=0; i<products.length;i++){
        let fileLocation = "./img/mousepad/"+objJson[i+129]["src"].split("/").slice(-1)[0]
        let nameGoods=objJson[i+129]['goodsName']
        let gametype=objJson[i+129]['game']
        let prices = objJson[i+129]['price']+"원"
        let a =$(arrayAhref[i])
        $(a).attr("href",`${i+130}.html`)
        $(products[i]).children("*").children("img").attr("src",fileLocation)
        $(products[i]).children("*").children("div:nth-child(2)").text(nameGoods)
        $(products[i]).children("*").children("div:nth-child(3)").text(gametype)
        $(products[i]).children("*").children("div:nth-child(4)").text(prices)

    }
    // 더보기 버튼 클릭 
    a = localStorage.getItem("favoritePadArray") 

    b = a !=null ? JSON.parse(a) : [0,0,0,0,0,0,0,0,0 ,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
    let parentRecommend=$(".typeGoodsList > .Goods > i")

    for(let i=0; i<parentRecommend.length;i++){
        console.log(`${i}: ${b[i]}`)
        if(b[i]==1){

            $(parentRecommend[i]).removeClass("fa-regular")
            $(parentRecommend[i]).addClass("fa-solid")
            $(parentRecommend[i]).addClass("red")
            $(parentRecommend[i]).attr("data-bs-target","none")
            $(parentRecommend[i]).attr("data-bs-toggle","none")

        }else{
            console.log((parentRecommend[i]))
        }
    }
    }

    load();
    $("#favoriteModalOK").click(()=>{
        // 경로 변경 
    "./save.html"
    })
    function initFavorite(){
        let favoriteArrays = JSON.parse(localStorage.getItem("favoriteArray"))
        let favoriteArray= favoriteArrays["type"]
        // 0 기본값 1하트
    }

    function moreBtnClicked(stringattr){
        console.log(stringattr)
        let hideItems = $(`.typeGoodsList.${stringattr} > div:nth-child(n+5)`)
        let btn = $(`.moreBtn.${stringattr}`)
        hideItems.attr("style","display : block ")
        btn.attr("style","display : none ")
    }
    let category = ["doll","airpot","clothes","statue","phonecase","pad","charge","goods"]
    function borderBtnClicked(goodsStr){
        console.log(goodsStr)
        // 음.. border가 클릭이 되면 어떤 폴더에서 굿즈들을 잔뜩 가져오고, 그만큼 요소들을 생성하고 없애야한다.
        location.href = `./productsBy${goodsStr}.html`
        // location.href= "https://www.naver.com"
    }
    function favoriteBtn(favoritegoods,sourceBtn,idx){
        // 로그
        console.log($(sourceBtn))
        let myfavoriteGoods= localStorage.getItem("바구니") != null ? JSON.parse(localStorage.getItem("바구니")) : new Array();
        if ( $(sourceBtn).hasClass("fa-regular")){
            $(sourceBtn).removeClass("fa-regular")
            $(sourceBtn).addClass("fa-solid")
            $(sourceBtn).addClass("red")

            $(sourceBtn).attr("data-bs-target","none")
            $(sourceBtn).attr("data-bs-toggle","none")

            // 형제들에서, 위치,굳즈이름,게임이름,가격,Type을 가져온다.
            // 하트 추가시 추가
            let parentArray= $( sourceBtn).prev().children() ;

            const parentSrc = $(parentArray[0]).attr("src");
            const goodsID = favoritegoods;
            const parentGoodsName =  $(parentArray[1]).text();
            const parentGameName =  $(parentArray[2]).text();
            const parentPrice =  $(parentArray[3]).text();
            const goodsType = "패드"


            let data = new Object()
            console.log(myfavoriteGoods)
            if(myfavoriteGoods != null){
                data.number= myfavoriteGoods.length;
            }else{
                data.number= 0;
            }
            data.src=parentSrc
            data.goodsName=parentGoodsName
            data.gameName=parentGameName
            data.price=parentPrice
            data.goodsType=goodsType

            myfavoriteGoods.push(data)

            localStorage.setItem("바구니", JSON.stringify(myfavoriteGoods));
            console.log(localStorage.getItem("바구니"))
            //b에 값 넣어서 색 값 저장해야함
            b[idx]=1
            localStorage.setItem("favoritePadArray",JSON.stringify(b))

        }else if($(sourceBtn).hasClass("fa-solid")){
            $(sourceBtn).removeClass("fa-solid")
            $(sourceBtn).removeClass("red")
            $(sourceBtn).addClass("fa-regular")
            $(sourceBtn).attr("data-bs-target","#staticBackdrop")
            $(sourceBtn).attr("data-bs-toggle","modal")
            //b에서 값 빼야함
            // json에서 없애서 다시 넣어야한다. 끔찍하군.
            b[idx]=0
            for(let j in myfavoriteGoods){
                if(myfavoriteGoods[j].goodsName === favoritegoods){
                    myfavoriteGoods.splice(j, favoritegoods)
                    j--;
                }
            }
            localStorage.removeItem("favoritePadArray")
            localStorage.setItem("favoritePadArray",JSON.stringify(b))
        }


    }

</script>
<!-- 부트스트랩 -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>


</body>
</html>